// Generated by CoffeeScript 1.7.1
(function() {
  $(function() {
    var html, session;
    console.log('in');
    if (window.localStorage && window.localStorage['ghost:session']) {
      session = JSON.parse(window.localStorage['ghost:session']);
      console.log(session);
      return $.ajax({
        url: '/ghost/api/v0.1/users/me/?include=roles&status=all'
      }).then(function(result) {
        var html, _ref, _ref1;
        console.log(result);
        html = '';
        if ((_ref = session.user) != null ? _ref.image : void 0) {
          html += "<div class=\"image\"><img src=\"" + session.user.image + "\" /></div>";
        } else {
          html += "<div class=\"image\"><img src=\"" + ((_ref1 = session.user) != null ? _ref1.image : void 0) + "\" /></div>";
        }
        return $('.user-widget').html(html);
      });
    } else {
      html = '<a class="subscribe-button" href="/signin">Login</a>';
      return $('.user-widget').html(html);
    }
  });

}).call(this);
